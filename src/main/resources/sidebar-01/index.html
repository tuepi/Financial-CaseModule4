<!doctype html>
<html lang="en">
<head>
    <title>Sidebar 01</title>
    <meta charset="utf-8">


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!--    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="../css/input.css">
    <link rel="stylesheet" href="../css/modal.css">
</head>
<body onload="showLogin()">
</div>
<div class="wrapper d-flex align-items-stretch" onclick="showLogin()" >
    <nav id="sidebar" style="background-color: #28b498">
        <div class="p-4 pt-5">
            <a href="#" class="img logo rounded-circle mb-5" style="background-image: url(images/logo.jpg);"></a>
            <ul class="list-unstyled components mb-5">
                <li class="active">
                    <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Home</a>
                    <ul class="collapse list-unstyled" id="homeSubmenu">
                        <li>
                            <a href="#">Home 1</a>
                        </li>
                        <li>
                            <a href="#">Home 2</a>
                        </li>
                        <li>
                            <a href="#">Home 3</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#pageSubmenu" data-toggle="collapse" aria-expanded="false"
                       class="dropdown-toggle">Pages</a>
                    <ul class="collapse list-unstyled" id="pageSubmenu">
                        <li>
                            <a href="#">Page 1</a>
                        </li>
                        <li>
                            <a href="#">Page 2</a>
                        </li>
                        <li>
                            <a href="#">Page 3</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#">Portfolio</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
            <div class="footer">
                <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    Copy-code &copy;<script>document.write(new Date().getFullYear());</script>
                    All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a
                            href="https://colorlib.com" target="_blank">Colorlib.com</a>
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
            </div>

        </div>
    </nav>

    <!-- Page Content  -->
    <div id="content" class="p-4 p-md-2">
        <nav class="mb-4 navbar navbar-expand-lg navbar-dark cyan">
            <button type="button" id="sidebarCollapse" class="btn btn-primary">
                <i class="fa fa-bars fa-lg"></i>
                <span class="sr-only">Toggle Menu</span>
            </button>
            <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa fa-bars"></i>
            </button>
            <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent-4" aria-controls="navbarSupportedContent-4"
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent-4">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#">Technology <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Add</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Laptops</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-5" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false">Category
                        </a>
                        <div class="dropdown-menu dropdown-purple" aria-labelledby="navbarDropdownMenuLink-5">
                            <a class="dropdown-item" href="#">Technology</a>
                            <a class="dropdown-item" href="#">Fashion</a>
                            <a class="dropdown-item" href="#">Vegetable</a>
                        </div>
                    </li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="#" onclick="showAddWallet()"><i class="fa fa-envelope"></i> hdfh <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fa fa-gear"></i> Settings</a>
                    </li>
                    <li class="nav-item dropdown"3 id="profile">

                    </li>
                </ul>
            </div>
        </nav>

        <div class="container">
            <div id="display" >

            </div>
        </div>
    </div>
</div>

<!--login modal-->
<div class="modal fade" id="modalLoginForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="border-radius: 20px">
            <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold" style="color: #28b498">Sign in</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body mx-3">
                <div class="md-form mb-5" >
                    <i class="fas fa-envelope prefix grey-text"></i>
                    <input type="text" id="username" placeholder="username"  style="color: #28b498">
                </div>
                <div class="md-form mb-4" >
                    <i class="fas fa-lock prefix grey-text"></i>
                    <input type="password" id="password" class="form-control validate" placeholder="password" style="color: #28b498">
                </div>
            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button class="btn btn-default" onclick="login()">Login</button>
            </div>
            <div>
                <p style="text-align: center">Don't have an account? <a href="#!" data-toggle="modal"
                                                                        data-target="#modalRegisterForm"
                                                                        class="link-info">Register here</a></p>
            </div>
        </div>
    </div>
</div>
<!--register modal-->
<div class="modal fade" id="modalRegisterForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="border-radius: 20px">
            <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold" style="color: #28b498">Sign up</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body mx-3">
                <div class="md-form mb-5">
                    <i class="fas fa-user prefix grey-text"></i>
                    <input type="text" id="user" class="form-control validate" placeholder="Your name" style="color: #28b498">
                </div>
                <div class="md-form mb-5">
                    <i class="fas fa-envelope prefix grey-text"></i>
                    <input type="text" id="pass" class="form-control validate" placeholder="Your password" style="color: #28b498">
                </div>
                <div class="md-form mb-4">
                    <i class="fas fa-lock prefix grey-text"></i>
                    <input type="password" id="confirmPassword" class="form-control validate" placeholder="confirmPassword" style="color: #28b498">
                </div>
            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button class="btn btn-default" onclick="register()">Sing Up</button>
            </div>
        </div>
    </div>
</div>
<!--register modal-->
<div class="modal fade" id="modalAddWalletForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="border-radius: 20px">
            <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold" style="color: #28b498">Create Wallet</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body mx-3">
                <div class="md-form mb-5">
                    <i class="fas fa-user prefix grey-text"></i>
                    <input type="text" id="moneyAmount" class="form-control validate" placeholder="Money Amount" style="color: #28b498">
                </div>
                <div class="md-form mb-5">
                    <i class="fas fa-envelope prefix grey-text"></i>
                    <input type="text" id="nameWallet" class="form-control validate" placeholder="Name Wallet" style="color: #28b498">
                </div>

                <select class="md-form mb-5" id="selectMoneyType">

                </select>
            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button class="btn btn-default" onclick="addWallet()">Create</button>
            </div>
        </div>
    </div>
</div>
<!--success modal-->
<div id="myModal" class="modal fade">
    <div class="modal-dialog modal-confirm">
        <div class="modal-content">
            <div class="modal-header">
                <div class="icon-box">
                    <i class="material-icons">&#xE876;</i>
                </div>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body text-center">
                <h4>Successful!</h4>
                <p id="notification"></p>
                <!--                <button class="btn btn-success" data-dismiss="modal"><span>Start Exploring</span> <i class="material-icons">&#xE5C8;</i></button>-->
            </div>
        </div>
    </div>
</div>
<script src="js/popper.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/main.js"></script>
<script src="js/main.js"></script>
<script src="../js/login.js"></script>
<script >
    function showAddWallet() {
        let showModal = document.getElementById("selectMoneyType")
        $('#modalAddWalletForm').modal('show')
        $.ajax({
            type: "GET",
            url: "http://localhost:8000/wallets/users/showMoneyType",
            success: function (moneyType) {
                console.log(moneyType)
                let str = ""
                for (let i = 0; i < moneyType.length; i++) {
                    str += ` <option class="form-control validate"  style="color: #28b498" id="${moneyType[i].id}">${moneyType[i].name}</option>`
                }
                showModal.innerHTML = str;
            }, error: function (error) {
                console.log(error);
            }
        })
    }
    
    $.ajax({
        headers: {
            Authorization: 'Bearer ' + window.sessionStorage.getItem("TOKEN_KEY"),
            'Accept': 'application/json',
            'Content-Type': 'application/json'
        },
        type: "GET",
        url: "http://localhost:8000/wallets/users/findByUser/" + window.sessionStorage.getItem("ID_USER_KEY"),
        success: function (data) {
            let content = ``;
            for (let i = 0; i < data.length; i++) {
                content += `<div  class="col-lg-4 col-md-12" style="padding-top: 50px">
                        <div class="white-box analytics-info">
                        <ul class="list-inline two-part d-flex align-items-center mb-0">
                                <li>
                                   <h1 class="box-title"><a style="text-align: center" href="#" onclick="findAllTransactionByWallet(${data[i].id})">${data[i].name}</a></h1>

                                </li>
                            </ul>
                            <ul class="list-inline two-part d-flex align-items-center mb-0">
                                <li>
                                    <div><img width="100px" height="70" src="/images.jpg">
                                    </div>
                                </li>
                                <li class="ms-auto"><span class="counter "  style="color: #1c7430; font-size: 25px">${data[i].moneyAmount.toLocaleString()} ${data[i].moneyType.name}</span></li>
                            </ul>
                        </div>
                        </div>
                     `
            }
            document.getElementById("display").innerHTML = content;
        }, error: function (error) {
            console.log(error);
        }
    })
    function findAllTransactionByWallet(id) {

    }
    function addWallet() {
       let moneyAmount = document.getElementById("moneyAmount").value;
       let nameWallet = document.getElementById("nameWallet").value;
       let selectMoneyType = document.getElementById("selectMoneyType").value;
        $.ajax({
            type: "POST",
            url: "http://localhost:8000/wallets" ,
            success: function (data) {

            }, error: function (error) {
                console.log(error);
            }
        })
    }
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.4.1/js/mdb.min.js"></script>
<script>
    profile()
</script>
</body>
</html>